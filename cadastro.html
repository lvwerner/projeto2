<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="cadastro.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
</head>
<body>
    <script>
          function validarSenha() {
            var senha = document.getElementById('Senha').value;
            var regexMaiuscula = /[A-Z]/;
            var regexMinuscula = /[a-z]/;
            var regexNumero = /[0-9]/;

            if (senha.length < 8 || !regexMaiuscula.test(senha) || !regexMinuscula.test(senha) || !regexNumero.test(senha)) {
                document.getElementById('senhaInvalida').innerText = "A senha deve conter pelo menos  \n 1 letra maiúscula  \n 1 letra minúscula  \n 1 número.";
            } else {
                document.getElementById('senhaInvalida').innerText = "";
            }
        }
        function Listar() {
            var cpfInput = document.getElementById("CPF");
            var cpfValue = cpfInput.value.replace(/\D/g, ''); // Remove caracteres não numéricos
          
            var errorDiv = document.getElementById("cpf-error");

            if (cpfValue.length !== 11) {
                errorDiv.textContent = "Insira o CPF corretamente (11 Números).";
                errorDiv.style.display = "block";
                return;
            } else {
                errorDiv.style.display = "none";
            }

            var dados = $('#form1').serialize();
            console.log(dados);
            $.ajax({
                type: "POST",
                url: "login.php",
                data: dados,
                dataType: 'json',
                success: function (meu_json) {
                    alert(meu_json);
                },
                error: function (xhr, status, error) {
                    alert("Erro: " + error);
                },
                beforeSend: function () {
                    // Fazer algo antes de enviar a requisição
                },
                complete: function () {
                    // Fazer algo após a conclusão da requisição
                },
            });
        }
    </script>


    <form action="" method="post" id="form1">
    <div class="login-container">
        <div class="login-header">
            <div class="titulo">CADASTRO</div>
        </div>
        <p>Nome Completo</p>
        <input type="text" class="login-input" id="nome" name="nome" value="" placeholder="Insira seu nome" />
        <p>Insira seu CPF</p>
        <input type="number" class="login-input" id="CPF" name="CPF" value="" placeholder="xxx.xxx.xxx-xx" maxlength="11" minlength="11"/>
        <div id="cpf-error" style="display: none; color: red;"></div>
        <p>Insira seu email</p><input type="email" class="login-input" id="Email" name="Email" value="" placeholder="********" >
        <p>Crie sua Senha</p>
        <input type="password" class="login-input" id="Senha" name="Senha" value="" placeholder="********" maxlength="15" minlength="8" onblur="validarSenha()"/>
        <div id="senhaInvalida" style="color: red;"></div>        
        <input type="button" name="enviar" value="Cadastrar" class="login-button" onclick="Listar();" />
    </div>
    </form>
</body>
</html>
