<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <linkrel="stylesheet" href="ficha.css">
</head>
<body>
    <banner>
        <form id="TraumaLocForm" name="localFerimento">
            <label for="traumaType" class="mt-1 mb-2">Selecione o tipo de trauma:</label>
            <select id="traumaType" class="form-control mb-3">
                <option value="Trauma 1">Trauma 1</option>
                <option value="Trauma 2">Trauma 2</option>
                <option value="Trauma 3">Trauma 3</option>
                <option value="Trauma 4">Trauma 4</option>
            </select>
            <div class="col position-relative">
                <img id="HumanBody"
                    src="https://i.pinimg.com/564x/b3/aa/63/b3aa63fba6d97786a4c8f99440d132ee.jpg"
                    alt="imagem adulto" style="width: 100%; height: auto; max-width: 564px;">
                <div id="markerPurple" class="position-absolute" style="width: 10px; height: 10px; background-color: purple; border-radius: 50%; display: none;"></div>
                <div id="markerRed" class="position-absolute" style="width: 10px; height: 10px; background-color: red; border-radius: 50%; display: none;"></div>
                <div id="markerOrange" class="position-absolute" style="width: 10px; height: 2px; background-color: orange; display: none;"></div>
                <div id="markerYellow" class="position-absolute" style="width: 10px; height: 10px; background-color: yellow; display: none;"></div>
            </div>
            <div id="results"></div>
            <div class="d-flex justify-content-between mt-4">
                <button onclick="printImage()">Print Image with Markers</button>
            </div>
        </form>
    </banner>
    
    <script>
        function drawMarkers(context, x, y, color) {
            context.beginPath();
            context.arc(x, y, 5, 0, 2 * Math.PI);
            context.fillStyle = color;
            context.fill();
        }
    
        function printImage() {
            const img = document.getElementById('HumanBody');
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
    
            canvas.width = img.width;
            canvas.height = img.height;
    
            context.drawImage(img, 0, 0, img.width, img.height);
    
            const markerPurple = document.getElementById('markerPurple');
            const markerRed = document.getElementById('markerRed');
            const markerOrange = document.getElementById('markerOrange');
            const markerYellow = document.getElementById('markerYellow');
    
            if (markerPurple.style.display !== 'none') {
                drawMarkers(context, parseFloat(markerPurple.style.left) + 5, parseFloat(markerPurple.style.top) + 5, 'purple');
            }
            if (markerRed.style.display !== 'none') {
                drawMarkers(context, parseFloat(markerRed.style.left) + 5, parseFloat(markerRed.style.top) + 5, 'red');
            }
            if (markerOrange.style.display !== 'none') {
                drawMarkers(context, parseFloat(markerOrange.style.left) + 5, parseFloat(markerOrange.style.top) + 1, 'orange');
            }
            if (markerYellow.style.display !== 'none') {
                drawMarkers(context, parseFloat(markerYellow.style.left) + 5, parseFloat(markerYellow.style.top) + 5, 'yellow');
            }
    
            const newWindow = window.open();
            newWindow.document.write('<img src="' + canvas.toDataURL() + '" alt="Imagem com Marcações">');
        }
    
        document.getElementById('HumanBody').addEventListener('click', function(event) {
            const x = event.offsetX;
            const y = event.offsetY;
    
            const markerPurple = document.getElementById('markerPurple');
            const markerRed = document.getElementById('markerRed');
            const markerOrange = document.getElementById('markerOrange');
            const markerYellow = document.getElementById('markerYellow');
    
            const selectedTrauma = document.getElementById('traumaType').value;
    
            markerPurple.style.display = 'none';
            markerRed.style.display = 'none';
            markerOrange.style.display = 'none';
            markerYellow.style.display = 'none';
    
            if (selectedTrauma === 'Trauma 1') {
                markerPurple.style.left = x - 5 + 'px';
                markerPurple.style.top = y - 5 + 'px';
                markerPurple.style.display = 'block';
            } else if (selectedTrauma === 'Trauma 2') {
                markerRed.style.left = x - 5 + 'px';
                markerRed.style.top = y - 5 + 'px';
                markerRed.style.display = 'block';
            } else if (selectedTrauma === 'Trauma 3') {
                markerOrange.style.left = x - 5 + 'px';
                markerOrange.style.top = y - 1 + 'px';
                markerOrange.style.display = 'block';
            } else if (selectedTrauma === 'Trauma 4') {
                markerYellow.style.left = x - 5 + 'px';
                markerYellow.style.top = y - 5 + 'px';
                markerYellow.style.display = 'block';
            }
        });
    </script>
    
</body>
</html>